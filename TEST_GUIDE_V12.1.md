# V12.1 改進版測試指南 ✅

## 🎯 快速測試清單

### 基本功能測試（5 分鐘）

#### 1. 登入測試
- [ ] 輸入正確密碼（1688 或 8888）可登入
- [ ] 輸入錯誤密碼會顯示剩餘次數
- [ ] 連續 5 次錯誤會被鎖定 5 分鐘
- [ ] 鎖定時無法登入
- [ ] 5 分鐘後可再次登入

**測試步驟：**
```
1. 開啟 index_v12.1_improved.html
2. 輸入錯誤密碼 "0000"
3. 檢查是否顯示 "剩餘嘗試次數：4/5"
4. 重複 4 次
5. 第 5 次應顯示 "系統已鎖定 5 分鐘"
6. 等待 5 分鐘（或修改程式碼縮短時間）
7. 再次嘗試，應可正常登入
```

---

#### 2. 網路狀態測試
- [ ] 離線時顯示黃色警告橫幅
- [ ] 上線時警告消失
- [ ] 狀態列正確顯示連線狀態

**測試步驟：**
```
1. 登入系統
2. 開啟 DevTools（F12）
3. Network 頁籤 → Offline 模式
4. 檢查頂部是否出現黃色橫幅
5. 取消 Offline 模式
6. 檢查橫幅是否消失
```

---

#### 3. 產品搜尋測試
- [ ] 搜尋反應快速（< 100ms）
- [ ] 結果正確
- [ ] 清除搜尋正常

**測試步驟：**
```
1. 切換到產品頁
2. 在搜尋框輸入 "蝦"
3. 檢查是否快速顯示結果
4. 點擊清除按鈕（✕）
5. 檢查是否顯示所有產品
```

---

#### 4. 圖片上傳測試
- [ ] 可以上傳圖片
- [ ] 圖片自動壓縮
- [ ] Console 顯示壓縮比例
- [ ] 過大圖片被拒絕（> 5MB）

**測試步驟：**
```
1. 加入產品到購物車
2. 點擊圖片圖示上傳
3. 選擇一張 2-3MB 的圖片
4. 開啟 Console（F12）
5. 檢查是否顯示壓縮資訊
   例如："圖片已壓縮：2000KB → 200KB"
6. 嘗試上傳 > 5MB 圖片
7. 應顯示 "圖片過大" 警告
```

---

#### 5. 報價儲存測試
- [ ] 空購物車無法儲存
- [ ] 有產品可以儲存
- [ ] 顯示 Firebase 同步訊息
- [ ] 儲存後出現在歷史記錄

**測試步驟：**
```
1. 清空購物車
2. 點擊 "儲存報價"
3. 應顯示 "購物車是空的"
4. 加入產品
5. 不填客戶名稱
6. 點擊 "儲存報價"
7. 應詢問是否繼續
8. 確認儲存
9. 檢查是否顯示 "已儲存並同步到雲端"
10. 切換到歷史頁
11. 檢查是否出現剛才的報價
```

---

#### 6. 刪除報價測試
- [ ] 刪除需要確認
- [ ] 本地列表移除
- [ ] Firebase 標記為已刪除

**測試步驟：**
```
1. 在歷史頁找到一筆報價
2. 點擊刪除按鈕
3. 應顯示確認訊息
4. 確認刪除
5. 檢查列表中已移除
6. 開啟 Firebase Console
7. 檢查該筆報價的 deleted 欄位為 true
```

---

#### 7. 錯誤處理測試
- [ ] 系統錯誤顯示友善頁面
- [ ] 可以重新載入
- [ ] 錯誤記錄到 Firebase

**測試步驟：**
```
方法 1：強制觸發錯誤
1. 開啟 Console（F12）
2. 執行：throw new Error('測試錯誤')
3. 應顯示錯誤頁面
4. 點擊 "重新載入系統"
5. 系統應重新載入

方法 2：修改程式碼
1. 找到任一組件
2. 加入 throw new Error('測試')
3. 觸發該組件渲染
4. 檢查錯誤頁面
```

---

## 🔬 進階測試（10 分鐘）

### 效能測試

#### 1. 產品列表渲染時間
```javascript
// 在 Console 執行
console.time('render');
// 切換到產品頁
console.timeEnd('render');
// 應該 < 100ms
```

#### 2. 搜尋響應時間
```javascript
// 在產品頁搜尋框輸入文字
// 觀察是否即時顯示結果
// 應該沒有明顯延遲
```

#### 3. 記憶體使用
```javascript
// 開啟 DevTools → Memory 頁籤
// 在不同頁面切換 10 次
// 拍攝 Heap Snapshot
// 檢查記憶體是否穩定（無持續增長）
```

---

### 資料同步測試

#### 1. Firebase 同步
```
1. 儲存報價
2. 開啟 Firebase Console
3. 檢查 quotes 節點
4. 確認資料已同步
5. 檢查資料結構完整
```

#### 2. 跨裝置同步（需要 Firebase）
```
1. 裝置 A 儲存報價
2. 裝置 B 重新載入
3. 檢查是否出現（需實作載入功能）
```

---

### 邊界情況測試

#### 1. 大量產品
```
1. 上傳包含 200+ 產品的 Excel
2. 切換到產品頁
3. 檢查渲染速度
4. 測試搜尋功能
5. 確認沒有卡頓
```

#### 2. 長時間使用
```
1. 保持系統開啟 1 小時
2. 進行各種操作
3. 檢查是否有記憶體洩漏
4. 確認功能正常
```

#### 3. 網路不穩定
```
1. 開啟 DevTools → Network
2. 設定 "Slow 3G"
3. 測試各項功能
4. 檢查是否有適當提示
```

---

## 📊 測試報告範本

### 基本資訊
```
測試日期：2024-12-13
測試版本：V12.1
測試者：______
瀏覽器：Chrome 120 / Firefox 121 / Safari 17
```

### 測試結果

| 功能 | 通過 | 失敗 | 備註 |
|------|------|------|------|
| 登入限制 | ✅ | ❌ | |
| 網路狀態 | ✅ | ❌ | |
| 產品搜尋 | ✅ | ❌ | |
| 圖片壓縮 | ✅ | ❌ | |
| 報價儲存 | ✅ | ❌ | |
| 報價刪除 | ✅ | ❌ | |
| 錯誤處理 | ✅ | ❌ | |

### 效能測試

| 項目 | 目標 | 實際 | 通過 |
|------|------|------|------|
| 產品列表渲染 | < 100ms | __ms | ✅/❌ |
| 搜尋響應 | < 50ms | __ms | ✅/❌ |
| 記憶體使用 | < 100MB | __MB | ✅/❌ |

### 發現的問題

1. **問題描述**：
   - 重現步驟：
   - 預期結果：
   - 實際結果：
   - 嚴重程度：🔴 嚴重 / 🟡 中等 / 🟢 輕微

2. **問題描述**：
   （同上格式）

### 建議改進

1. 
2. 
3. 

---

## 🐛 常見問題排查

### 問題 1：登入鎖定無法解除
**症狀**：5 分鐘後仍然鎖定
**排查**：
```javascript
// 在 Console 執行
localStorage.clear();
location.reload();
```

### 問題 2：圖片上傳失敗
**症狀**：選擇圖片後無反應
**排查**：
1. 檢查 Console 是否有錯誤
2. 確認圖片格式（JPG, PNG）
3. 確認檔案大小 < 5MB
4. 嘗試不同圖片

### 問題 3：Firebase 無法連線
**症狀**：儲存時顯示 "無法同步"
**排查**：
1. 檢查網路連線
2. 確認 Firebase 配置
3. 查看 Console 錯誤
4. 檢查 Firebase 規則

### 問題 4：產品列表空白
**症狀**：產品頁沒有內容
**排查**：
1. 確認已上傳產品資料
2. 檢查 data.products 是否有資料
3. 查看 Console 錯誤
4. 重新上傳 Excel

---

## ✅ 驗收標準

### 必須通過（阻擋上線）
- [x] 登入功能正常
- [x] 產品搜尋正常
- [x] 報價儲存正常
- [x] 無嚴重錯誤
- [x] 效能可接受

### 建議通過（不阻擋）
- [ ] 所有邊界情況處理
- [ ] 完整錯誤訊息
- [ ] 最佳效能表現
- [ ] 完整測試覆蓋

---

## 📝 測試清單（可列印）

```
□ 登入 - 正確密碼
□ 登入 - 錯誤密碼顯示次數
□ 登入 - 5次錯誤鎖定
□ 登入 - 鎖定倒數
□ 網路 - 離線顯示橫幅
□ 網路 - 上線橫幅消失
□ 搜尋 - 快速響應
□ 搜尋 - 結果正確
□ 圖片 - 上傳成功
□ 圖片 - 自動壓縮
□ 圖片 - Console 顯示
□ 圖片 - 大檔拒絕
□ 儲存 - 空購物車阻擋
□ 儲存 - 成功訊息
□ 儲存 - Firebase 同步
□ 儲存 - 歷史顯示
□ 刪除 - 確認訊息
□ 刪除 - 本地移除
□ 刪除 - Firebase 標記
□ 錯誤 - 友善頁面
□ 錯誤 - 重新載入
□ 錯誤 - Firebase 記錄
```

---

**測試完成後**，請填寫測試報告並回報結果。

祝測試順利！🎉
